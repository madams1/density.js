function density(t){var a=800,n=400,r="rgba(15, 155, 155, 0.6)",e=null,i=null,l="body",s=null,d=function(){return d3.json(t,function(t){var d=function(t,a){var n,r;return a?(n=1,r=d3.max(t.map(function(t){return t[n]})),Math.ceil(100*r)/93):(n=0,r=d3.max(t.map(function(t){return t[n]})))},c=t.sort(d3.ascending),o=d3.extent(c),u=science.stats.bandwidth.nrd0(c),g=science.stats.kde().sample(c),m=g(d3.range(o[0],o[1],u/2));w=a,h=n,margin={top:10,right:22,bottom:50,left:22},x=d3.scale.linear().domain([o[0],d(m,!1)]).range([0,w]),y=d3.scale.linear().domain([0,d(m,!0)]).range([0,h]);var p=d3.select(l).append("div").classed("density-chart",!0).append("svg").attr("width",w+margin.left+margin.right).attr("height",h+margin.top+margin.bottom),f=p.append("g").attr("transform","translate("+margin.left+","+margin.top+")"),v=p.append("g").attr("transform","translate("+margin.left+","+margin.top+")"),b=f.append("clipPath").attr("id","clip").append("rect").attr("height",h),k=d3.svg.area().interpolate("cardinal").x(function(t){return x(t[0])}).y0(h).y1(function(t){return h-y(t[1])}),z=(v.selectAll("path").data(d3.values(science.stats.bandwidth)).enter().append("path").attr("d",function(){return k(m)}).classed("filled",!0).attr("clip-path","url(#clip)").style("fill",r),f.selectAll("path").data(d3.values(science.stats.bandwidth)).enter().append("path").attr("d",function(){return k(m)}).classed("original",!0),p.append("rect").attr("width",w).attr("height",h).attr("fill","transparent").attr("transform","translate("+margin.left+","+margin.top+")")),A=d3.svg.axis().scale(x).orient("bottom").outerTickSize(0).tickFormat(e).ticks(i);p.append("g").classed("xaxis",!0).attr("transform","translate("+margin.left+","+(h+margin.top)+")").call(A).append("text").classed("axis-label",!0).attr("y",40).attr("x",a/2).attr("text-anchor","middle").text(s);var F=v.append("line").attr("class","rule").style("stroke-dasharray","3, 3").attr("y1",15).attr("y2",h),T=p.append("text").attr("y",10+margin.top);z.on("mousemove",function(){var t=d3.event.pageX;b.attr("width",t-margin.left-7);var a=d3.format(".1%")(d3.mean(c.map(function(a){return a<x.invert(t-margin.left-7)})));T.attr("x",t-5).text(a).attr("text-anchor","middle").attr("font-size",12),F.attr("x1",t-margin.left-7).attr("x2",t-margin.left-7)})}),{target:function(t){return arguments.length?(l=t,d):l},width:function(t){return arguments.length?(a=t,d):a},height:function(t){return arguments.length?(n=t,d):n},fill:function(t){return arguments.length?(r=t,d):r},numTicks:function(t){return arguments.length?(i=t,d):i},tickFormat:function(t){return arguments.length?(e=t,d):e},axisLabel:function(t){return arguments.length?(s=t,d):s}}}();return d}
